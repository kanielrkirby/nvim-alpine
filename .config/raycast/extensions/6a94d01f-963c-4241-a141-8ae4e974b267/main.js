var l=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var d=r=>l(r,"__esModule",{value:!0});var h=(r,n)=>{for(var e in n)l(r,e,{get:n[e],enumerable:!0})},P=(r,n,e,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of w(n))!p.call(r,s)&&(e||s!=="default")&&l(r,s,{get:()=>n[s],enumerable:!(o=f(n,s))||o.enumerable});return r};var R=(r=>(n,e)=>r&&r.get(n)||(e=P(d({}),n,1),r&&r.set(n,e),e))(typeof WeakMap!="undefined"?new WeakMap:0);var L={};h(L,{default:()=>u});var t=require("@raycast/api");var i=[{name:"Google Search",url:"google.com",allowParams:["q","ie"]},{name:"Baidu Search",url:"baidu.com",allowParams:["wd","ie"]},{name:"Bing Search",url:"bing.com",allowParams:["q"]},{name:"Netease Music",url:"music.163.com",allowParams:["id"]}];function c(r){let n=/(https?:\/\/[^\s]+)/g,e=r.match(n);return e||[]}function y(r,n){let e=c(r);for(let o of e)r=r.replace(o,n.shift()||o);return r}function U(r,n){let e=r.split("?");if(e.length<2)return r;let o=e[1].split("&");if(n.length>0){let s=o.filter(a=>n.includes(a.split("=")[0]));return`${e[0]}?${s.join("&")}`}return e[0]}async function u(){let r=await t.Clipboard.readText();if(r===void 0){await(0,t.showHUD)("Clipboard is empty");return}let n=c(r);if(n.length===0){await(0,t.showHUD)("No URL found");return}console.log("raw urls",n);let e=[];for(let s of n){let a=i.find(g=>s.includes(g.url))?.allowParams||[];console.log("allow params",a);let m=U(s,a);e.push(m)}console.log("new urls",e);let o=y(r,e);console.log("new text",o),await t.Clipboard.copy(o),await(0,t.showHUD)("Removed tracking parameters")}module.exports=R(L);0&&(module.exports={});
