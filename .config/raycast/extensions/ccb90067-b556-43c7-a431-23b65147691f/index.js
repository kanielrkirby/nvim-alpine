"use strict";var p=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var C=(o,e)=>{for(var n in e)p(o,n,{get:e[n],enumerable:!0})},P=(o,e,n,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of $(e))!A.call(o,s)&&s!==n&&p(o,s,{get:()=>e[s],enumerable:!(c=y(e,s))||c.enumerable});return o};var g=o=>P(p({},"__esModule",{value:!0}),o);var V={};C(V,{default:()=>S});module.exports=g(V);var t=require("@raycast/api"),r=require("react"),m=require("child_process"),f=require("util"),u=require("react/jsx-runtime"),d="/Applications/UTM.app/Contents/MacOS/utmctl",l=(0,f.promisify)(m.exec);function L(o){return o.split(`
`).slice(1).filter(Boolean).map(e=>{let n=e.split(" ").filter(Boolean);return{uuid:n[0],status:n[1],name:n[2]}})}function T(){let[o,e]=(0,r.useState)(),[n,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{async function s(){try{let{stdout:i}=await l(`${d} list`),a=L(i);e(a)}catch{(0,t.showToast)(t.Toast.Style.Failure,"Couldn't find virtual machines."),e([])}}s(),c(!1)},[n]),(0,u.jsx)(t.List,{isLoading:o===void 0,children:o?.map(s=>{let i=s.status==="stopped",a=s.status==="paused";return(0,u.jsx)(t.List.Item,{title:s.name,subtitle:s.status,actions:(0,u.jsxs)(t.ActionPanel,{children:[(0,u.jsx)(t.Action,{title:`${i?"Start":a?"Resume":"Stop"}`,icon:i?t.Icon.Play:a?t.Icon.Play:t.Icon.Stop,onAction:async()=>{await l(`${d} ${i||a?"start":"stop"} ${s.uuid}`),(0,t.showToast)(t.Toast.Style.Success,`${i?"Started":a?"Resumed":"Stopped"} ${s.name} (${s.uuid})`),c(!0)}}),!(i||a)&&(0,u.jsx)(t.Action,{title:"Suspend",icon:t.Icon.Pause,onAction:async()=>{await l(`${d} suspend ${s.uuid}`),(0,t.showToast)(t.Toast.Style.Success,`Suspended ${s.name} (${s.uuid})`),c(!0)}}),(0,u.jsx)(t.Action.CopyToClipboard,{content:s.uuid,title:"Copy UUID"})]})},s.uuid)})})}function S(){return(0,u.jsx)(T,{})}0&&(module.exports={});
